{% extends "base_livecode.html" %}

{% block title %}Unsound Playground{% endblock %}

{% block content %}

<div>Java / <a href="unsound/scala">Scala</a>
</div>

<div style="float:right;">
<a href="https://github.com/namin/unsound/blob/master/doc/unsound-oopsla16.pdf"><img src="http://raw.githubusercontent.com/namin/unsound/master/doc/unsound-oopsla16.png"></img></a>
</div>

<p>
Try these examples, each is a valid Java program according to the specification:
<ul>
<li><a href="#2e4392fc6392155ecfdb91c5fd183a01">Unsound.java in Java 8 (compiles, runs to cast exception)</a></li>
<li><a href="#1425505f7c9f62770632bff6e520b866">Unsound.java in Java 9 (does not compile)</a></li>
<li><a href="#cb32d4994710d626c877d2387712be99">Unsound9.java in Java 9 (compiles, runs to cast exception)</a></li>
<li><a href="#e544cf105b4d301bfb821ff1a64ba833">UnsoundSpec.java in Java 6 (does not compile)</a></li>
<li><a href="#c27c67c524eade3bbe15b1993b0a846a">Nullless.java in Java 8 (compiles, run to cast exception)</a></li>
</ul>
</p>

<div class="live norun" id="ex1">
class Unsound {
  static class Bind&lt;A&gt; {
    class Curry&lt;B extends A&gt; {
	  A curry(B b) { return b; }
	}
    &lt;B extends A&gt;
    Curry&lt;B&gt; upcast(Constraint&lt;B&gt; constraint) {
      return new Curry&lt;B&gt;();
    }
    class Constraint&lt;B extends A&gt; {}
	&lt;B&gt; A coerce(B t) {
	  Constraint&lt;? super B&gt; constraint = null;
	  return upcast(constraint).curry(t);
	}
  }
  static &lt;T,U&gt; U coerce(T t) {
    return new Bind&lt;U&gt;().&lt;T&gt;coerce(t);
  }
  public static void main(String[] args) {
    String zero = Unsound.&lt;Integer,String&gt;coerce(0);
  }
}
</div>

<div class="live" id="run1" data-lib="ex1" data-mode="text/x-sh">
#!/bin/bash
set -e -v

### PICK VERSION
export JAVA_HOME=/usr/lib/jvm/java-7-oracle
export PATH=$JAVA_HOME/bin:$PATH

### CHECK VERSION
java -version

### COMPILE
cat $1 >Unsound.java
javac Unsound.java

### RUN
java Unsound
</div>

{% endblock %}
